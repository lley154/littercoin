Preview Testnet Testing Log 2022-10-04

lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli/testnet$ cardano-cli query protocol-parameters --testnet-magic 2
{
    "collateralPercentage": 150,
    "costModels": {
        "PlutusScriptV1": {
            "addInteger-cpu-arguments-intercept": 205665,
            "addInteger-cpu-arguments-slope": 812,
            "addInteger-memory-arguments-intercept": 1,
            "addInteger-memory-arguments-slope": 1,
            "appendByteString-cpu-arguments-intercept": 1000,
            "appendByteString-cpu-arguments-slope": 571,
            "appendByteString-memory-arguments-intercept": 0,
            "appendByteString-memory-arguments-slope": 1,
            "appendString-cpu-arguments-intercept": 1000,
            "appendString-cpu-arguments-slope": 24177,
            "appendString-memory-arguments-intercept": 4,
            "appendString-memory-arguments-slope": 1,
            "bData-cpu-arguments": 1000,
            "bData-memory-arguments": 32,
            "blake2b_256-cpu-arguments-intercept": 117366,
            "blake2b_256-cpu-arguments-slope": 10475,
            "blake2b_256-memory-arguments": 4,
            "cekApplyCost-exBudgetCPU": 23000,
            "cekApplyCost-exBudgetMemory": 100,
            "cekBuiltinCost-exBudgetCPU": 23000,
            "cekBuiltinCost-exBudgetMemory": 100,
            "cekConstCost-exBudgetCPU": 23000,
            "cekConstCost-exBudgetMemory": 100,
            "cekDelayCost-exBudgetCPU": 23000,
            "cekDelayCost-exBudgetMemory": 100,
            "cekForceCost-exBudgetCPU": 23000,
            "cekForceCost-exBudgetMemory": 100,
            "cekLamCost-exBudgetCPU": 23000,
            "cekLamCost-exBudgetMemory": 100,
            "cekStartupCost-exBudgetCPU": 100,
            "cekStartupCost-exBudgetMemory": 100,
            "cekVarCost-exBudgetCPU": 23000,
            "cekVarCost-exBudgetMemory": 100,
            "chooseData-cpu-arguments": 19537,
            "chooseData-memory-arguments": 32,
            "chooseList-cpu-arguments": 175354,
            "chooseList-memory-arguments": 32,
            "chooseUnit-cpu-arguments": 46417,
            "chooseUnit-memory-arguments": 4,
            "consByteString-cpu-arguments-intercept": 221973,
            "consByteString-cpu-arguments-slope": 511,
            "consByteString-memory-arguments-intercept": 0,
            "consByteString-memory-arguments-slope": 1,
            "constrData-cpu-arguments": 89141,
            "constrData-memory-arguments": 32,
            "decodeUtf8-cpu-arguments-intercept": 497525,
            "decodeUtf8-cpu-arguments-slope": 14068,
            "decodeUtf8-memory-arguments-intercept": 4,
            "decodeUtf8-memory-arguments-slope": 2,
            "divideInteger-cpu-arguments-constant": 196500,
            "divideInteger-cpu-arguments-model-arguments-intercept": 453240,
            "divideInteger-cpu-arguments-model-arguments-slope": 220,
            "divideInteger-memory-arguments-intercept": 0,
            "divideInteger-memory-arguments-minimum": 1,
            "divideInteger-memory-arguments-slope": 1,
            "encodeUtf8-cpu-arguments-intercept": 1000,
            "encodeUtf8-cpu-arguments-slope": 28662,
            "encodeUtf8-memory-arguments-intercept": 4,
            "encodeUtf8-memory-arguments-slope": 2,
            "equalsByteString-cpu-arguments-constant": 245000,
            "equalsByteString-cpu-arguments-intercept": 216773,
            "equalsByteString-cpu-arguments-slope": 62,
            "equalsByteString-memory-arguments": 1,
            "equalsData-cpu-arguments-intercept": 1060367,
            "equalsData-cpu-arguments-slope": 12586,
            "equalsData-memory-arguments": 1,
            "equalsInteger-cpu-arguments-intercept": 208512,
            "equalsInteger-cpu-arguments-slope": 421,
            "equalsInteger-memory-arguments": 1,
            "equalsString-cpu-arguments-constant": 187000,
            "equalsString-cpu-arguments-intercept": 1000,
            "equalsString-cpu-arguments-slope": 52998,
            "equalsString-memory-arguments": 1,
            "fstPair-cpu-arguments": 80436,
            "fstPair-memory-arguments": 32,
            "headList-cpu-arguments": 43249,
            "headList-memory-arguments": 32,
            "iData-cpu-arguments": 1000,
            "iData-memory-arguments": 32,
            "ifThenElse-cpu-arguments": 80556,
            "ifThenElse-memory-arguments": 1,
            "indexByteString-cpu-arguments": 57667,
            "indexByteString-memory-arguments": 4,
            "lengthOfByteString-cpu-arguments": 1000,
            "lengthOfByteString-memory-arguments": 10,
            "lessThanByteString-cpu-arguments-intercept": 197145,
            "lessThanByteString-cpu-arguments-slope": 156,
            "lessThanByteString-memory-arguments": 1,
            "lessThanEqualsByteString-cpu-arguments-intercept": 197145,
            "lessThanEqualsByteString-cpu-arguments-slope": 156,
            "lessThanEqualsByteString-memory-arguments": 1,
            "lessThanEqualsInteger-cpu-arguments-intercept": 204924,
            "lessThanEqualsInteger-cpu-arguments-slope": 473,
            "lessThanEqualsInteger-memory-arguments": 1,
            "lessThanInteger-cpu-arguments-intercept": 208896,
            "lessThanInteger-cpu-arguments-slope": 511,
            "lessThanInteger-memory-arguments": 1,
            "listData-cpu-arguments": 52467,
            "listData-memory-arguments": 32,
            "mapData-cpu-arguments": 64832,
            "mapData-memory-arguments": 32,
            "mkCons-cpu-arguments": 65493,
            "mkCons-memory-arguments": 32,
            "mkNilData-cpu-arguments": 22558,
            "mkNilData-memory-arguments": 32,
            "mkNilPairData-cpu-arguments": 16563,
            "mkNilPairData-memory-arguments": 32,
            "mkPairData-cpu-arguments": 76511,
            "mkPairData-memory-arguments": 32,
            "modInteger-cpu-arguments-constant": 196500,
            "modInteger-cpu-arguments-model-arguments-intercept": 453240,
            "modInteger-cpu-arguments-model-arguments-slope": 220,
            "modInteger-memory-arguments-intercept": 0,
            "modInteger-memory-arguments-minimum": 1,
            "modInteger-memory-arguments-slope": 1,
            "multiplyInteger-cpu-arguments-intercept": 69522,
            "multiplyInteger-cpu-arguments-slope": 11687,
            "multiplyInteger-memory-arguments-intercept": 0,
            "multiplyInteger-memory-arguments-slope": 1,
            "nullList-cpu-arguments": 60091,
            "nullList-memory-arguments": 32,
            "quotientInteger-cpu-arguments-constant": 196500,
            "quotientInteger-cpu-arguments-model-arguments-intercept": 453240,
            "quotientInteger-cpu-arguments-model-arguments-slope": 220,
            "quotientInteger-memory-arguments-intercept": 0,
            "quotientInteger-memory-arguments-minimum": 1,
            "quotientInteger-memory-arguments-slope": 1,
            "remainderInteger-cpu-arguments-constant": 196500,
            "remainderInteger-cpu-arguments-model-arguments-intercept": 453240,
            "remainderInteger-cpu-arguments-model-arguments-slope": 220,
            "remainderInteger-memory-arguments-intercept": 0,
            "remainderInteger-memory-arguments-minimum": 1,
            "remainderInteger-memory-arguments-slope": 1,
            "sha2_256-cpu-arguments-intercept": 806990,
            "sha2_256-cpu-arguments-slope": 30482,
            "sha2_256-memory-arguments": 4,
            "sha3_256-cpu-arguments-intercept": 1927926,
            "sha3_256-cpu-arguments-slope": 82523,
            "sha3_256-memory-arguments": 4,
            "sliceByteString-cpu-arguments-intercept": 265318,
            "sliceByteString-cpu-arguments-slope": 0,
            "sliceByteString-memory-arguments-intercept": 4,
            "sliceByteString-memory-arguments-slope": 0,
            "sndPair-cpu-arguments": 85931,
            "sndPair-memory-arguments": 32,
            "subtractInteger-cpu-arguments-intercept": 205665,
            "subtractInteger-cpu-arguments-slope": 812,
            "subtractInteger-memory-arguments-intercept": 1,
            "subtractInteger-memory-arguments-slope": 1,
            "tailList-cpu-arguments": 41182,
            "tailList-memory-arguments": 32,
            "trace-cpu-arguments": 212342,
            "trace-memory-arguments": 32,
            "unBData-cpu-arguments": 31220,
            "unBData-memory-arguments": 32,
            "unConstrData-cpu-arguments": 32696,
            "unConstrData-memory-arguments": 32,
            "unIData-cpu-arguments": 43357,
            "unIData-memory-arguments": 32,
            "unListData-cpu-arguments": 32247,
            "unListData-memory-arguments": 32,
            "unMapData-cpu-arguments": 38314,
            "unMapData-memory-arguments": 32,
            "verifyEd25519Signature-cpu-arguments-intercept": 9462713,
            "verifyEd25519Signature-cpu-arguments-slope": 1021,
            "verifyEd25519Signature-memory-arguments": 10
        },
        "PlutusScriptV2": {
            "addInteger-cpu-arguments-intercept": 205665,
            "addInteger-cpu-arguments-slope": 812,
            "addInteger-memory-arguments-intercept": 1,
            "addInteger-memory-arguments-slope": 1,
            "appendByteString-cpu-arguments-intercept": 1000,
            "appendByteString-cpu-arguments-slope": 571,
            "appendByteString-memory-arguments-intercept": 0,
            "appendByteString-memory-arguments-slope": 1,
            "appendString-cpu-arguments-intercept": 1000,
            "appendString-cpu-arguments-slope": 24177,
            "appendString-memory-arguments-intercept": 4,
            "appendString-memory-arguments-slope": 1,
            "bData-cpu-arguments": 1000,
            "bData-memory-arguments": 32,
            "blake2b_256-cpu-arguments-intercept": 117366,
            "blake2b_256-cpu-arguments-slope": 10475,
            "blake2b_256-memory-arguments": 4,
            "cekApplyCost-exBudgetCPU": 23000,
            "cekApplyCost-exBudgetMemory": 100,
            "cekBuiltinCost-exBudgetCPU": 23000,
            "cekBuiltinCost-exBudgetMemory": 100,
            "cekConstCost-exBudgetCPU": 23000,
            "cekConstCost-exBudgetMemory": 100,
            "cekDelayCost-exBudgetCPU": 23000,
            "cekDelayCost-exBudgetMemory": 100,
            "cekForceCost-exBudgetCPU": 23000,
            "cekForceCost-exBudgetMemory": 100,
            "cekLamCost-exBudgetCPU": 23000,
            "cekLamCost-exBudgetMemory": 100,
            "cekStartupCost-exBudgetCPU": 100,
            "cekStartupCost-exBudgetMemory": 100,
            "cekVarCost-exBudgetCPU": 23000,
            "cekVarCost-exBudgetMemory": 100,
            "chooseData-cpu-arguments": 19537,
            "chooseData-memory-arguments": 32,
            "chooseList-cpu-arguments": 175354,
            "chooseList-memory-arguments": 32,
            "chooseUnit-cpu-arguments": 46417,
            "chooseUnit-memory-arguments": 4,
            "consByteString-cpu-arguments-intercept": 221973,
            "consByteString-cpu-arguments-slope": 511,
            "consByteString-memory-arguments-intercept": 0,
            "consByteString-memory-arguments-slope": 1,
            "constrData-cpu-arguments": 89141,
            "constrData-memory-arguments": 32,
            "decodeUtf8-cpu-arguments-intercept": 497525,
            "decodeUtf8-cpu-arguments-slope": 14068,
            "decodeUtf8-memory-arguments-intercept": 4,
            "decodeUtf8-memory-arguments-slope": 2,
            "divideInteger-cpu-arguments-constant": 196500,
            "divideInteger-cpu-arguments-model-arguments-intercept": 453240,
            "divideInteger-cpu-arguments-model-arguments-slope": 220,
            "divideInteger-memory-arguments-intercept": 0,
            "divideInteger-memory-arguments-minimum": 1,
            "divideInteger-memory-arguments-slope": 1,
            "encodeUtf8-cpu-arguments-intercept": 1000,
            "encodeUtf8-cpu-arguments-slope": 28662,
            "encodeUtf8-memory-arguments-intercept": 4,
            "encodeUtf8-memory-arguments-slope": 2,
            "equalsByteString-cpu-arguments-constant": 245000,
            "equalsByteString-cpu-arguments-intercept": 216773,
            "equalsByteString-cpu-arguments-slope": 62,
            "equalsByteString-memory-arguments": 1,
            "equalsData-cpu-arguments-intercept": 1060367,
            "equalsData-cpu-arguments-slope": 12586,
            "equalsData-memory-arguments": 1,
            "equalsInteger-cpu-arguments-intercept": 208512,
            "equalsInteger-cpu-arguments-slope": 421,
            "equalsInteger-memory-arguments": 1,
            "equalsString-cpu-arguments-constant": 187000,
            "equalsString-cpu-arguments-intercept": 1000,
            "equalsString-cpu-arguments-slope": 52998,
            "equalsString-memory-arguments": 1,
            "fstPair-cpu-arguments": 80436,
            "fstPair-memory-arguments": 32,
            "headList-cpu-arguments": 43249,
            "headList-memory-arguments": 32,
            "iData-cpu-arguments": 1000,
            "iData-memory-arguments": 32,
            "ifThenElse-cpu-arguments": 80556,
            "ifThenElse-memory-arguments": 1,
            "indexByteString-cpu-arguments": 57667,
            "indexByteString-memory-arguments": 4,
            "lengthOfByteString-cpu-arguments": 1000,
            "lengthOfByteString-memory-arguments": 10,
            "lessThanByteString-cpu-arguments-intercept": 197145,
            "lessThanByteString-cpu-arguments-slope": 156,
            "lessThanByteString-memory-arguments": 1,
            "lessThanEqualsByteString-cpu-arguments-intercept": 197145,
            "lessThanEqualsByteString-cpu-arguments-slope": 156,
            "lessThanEqualsByteString-memory-arguments": 1,
            "lessThanEqualsInteger-cpu-arguments-intercept": 204924,
            "lessThanEqualsInteger-cpu-arguments-slope": 473,
            "lessThanEqualsInteger-memory-arguments": 1,
            "lessThanInteger-cpu-arguments-intercept": 208896,
            "lessThanInteger-cpu-arguments-slope": 511,
            "lessThanInteger-memory-arguments": 1,
            "listData-cpu-arguments": 52467,
            "listData-memory-arguments": 32,
            "mapData-cpu-arguments": 64832,
            "mapData-memory-arguments": 32,
            "mkCons-cpu-arguments": 65493,
            "mkCons-memory-arguments": 32,
            "mkNilData-cpu-arguments": 22558,
            "mkNilData-memory-arguments": 32,
            "mkNilPairData-cpu-arguments": 16563,
            "mkNilPairData-memory-arguments": 32,
            "mkPairData-cpu-arguments": 76511,
            "mkPairData-memory-arguments": 32,
            "modInteger-cpu-arguments-constant": 196500,
            "modInteger-cpu-arguments-model-arguments-intercept": 453240,
            "modInteger-cpu-arguments-model-arguments-slope": 220,
            "modInteger-memory-arguments-intercept": 0,
            "modInteger-memory-arguments-minimum": 1,
            "modInteger-memory-arguments-slope": 1,
            "multiplyInteger-cpu-arguments-intercept": 69522,
            "multiplyInteger-cpu-arguments-slope": 11687,
            "multiplyInteger-memory-arguments-intercept": 0,
            "multiplyInteger-memory-arguments-slope": 1,
            "nullList-cpu-arguments": 60091,
            "nullList-memory-arguments": 32,
            "quotientInteger-cpu-arguments-constant": 196500,
            "quotientInteger-cpu-arguments-model-arguments-intercept": 453240,
            "quotientInteger-cpu-arguments-model-arguments-slope": 220,
            "quotientInteger-memory-arguments-intercept": 0,
            "quotientInteger-memory-arguments-minimum": 1,
            "quotientInteger-memory-arguments-slope": 1,
            "remainderInteger-cpu-arguments-constant": 196500,
            "remainderInteger-cpu-arguments-model-arguments-intercept": 453240,
            "remainderInteger-cpu-arguments-model-arguments-slope": 220,
            "remainderInteger-memory-arguments-intercept": 0,
            "remainderInteger-memory-arguments-minimum": 1,
            "remainderInteger-memory-arguments-slope": 1,
            "serialiseData-cpu-arguments-intercept": 1159724,
            "serialiseData-cpu-arguments-slope": 392670,
            "serialiseData-memory-arguments-intercept": 0,
            "serialiseData-memory-arguments-slope": 2,
            "sha2_256-cpu-arguments-intercept": 806990,
            "sha2_256-cpu-arguments-slope": 30482,
            "sha2_256-memory-arguments": 4,
            "sha3_256-cpu-arguments-intercept": 1927926,
            "sha3_256-cpu-arguments-slope": 82523,
            "sha3_256-memory-arguments": 4,
            "sliceByteString-cpu-arguments-intercept": 265318,
            "sliceByteString-cpu-arguments-slope": 0,
            "sliceByteString-memory-arguments-intercept": 4,
            "sliceByteString-memory-arguments-slope": 0,
            "sndPair-cpu-arguments": 85931,
            "sndPair-memory-arguments": 32,
            "subtractInteger-cpu-arguments-intercept": 205665,
            "subtractInteger-cpu-arguments-slope": 812,
            "subtractInteger-memory-arguments-intercept": 1,
            "subtractInteger-memory-arguments-slope": 1,
            "tailList-cpu-arguments": 41182,
            "tailList-memory-arguments": 32,
            "trace-cpu-arguments": 212342,
            "trace-memory-arguments": 32,
            "unBData-cpu-arguments": 31220,
            "unBData-memory-arguments": 32,
            "unConstrData-cpu-arguments": 32696,
            "unConstrData-memory-arguments": 32,
            "unIData-cpu-arguments": 43357,
            "unIData-memory-arguments": 32,
            "unListData-cpu-arguments": 32247,
            "unListData-memory-arguments": 32,
            "unMapData-cpu-arguments": 38314,
            "unMapData-memory-arguments": 32,
            "verifyEcdsaSecp256k1Signature-cpu-arguments": 20000000000,
            "verifyEcdsaSecp256k1Signature-memory-arguments": 20000000000,
            "verifyEd25519Signature-cpu-arguments-intercept": 9462713,
            "verifyEd25519Signature-cpu-arguments-slope": 1021,
            "verifyEd25519Signature-memory-arguments": 10,
            "verifySchnorrSecp256k1Signature-cpu-arguments-intercept": 20000000000,
            "verifySchnorrSecp256k1Signature-cpu-arguments-slope": 0,
            "verifySchnorrSecp256k1Signature-memory-arguments": 20000000000
        }
    },
    "decentralization": null,
    "executionUnitPrices": {
        "priceMemory": 5.77e-2,
        "priceSteps": 7.21e-5
    },
    "extraPraosEntropy": null,
    "maxBlockBodySize": 90112,
    "maxBlockExecutionUnits": {
        "memory": 62000000,
        "steps": 40000000000
    },
    "maxBlockHeaderSize": 1100,
    "maxCollateralInputs": 3,
    "maxTxExecutionUnits": {
        "memory": 14000000,
        "steps": 10000000000
    },
    "maxTxSize": 16384,
    "maxValueSize": 5000,
    "minPoolCost": 340000000,
    "minUTxOValue": null,
    "monetaryExpansion": 3.0e-3,
    "poolPledgeInfluence": 0.3,
    "poolRetireMaxEpoch": 18,
    "protocolVersion": {
        "major": 7,
        "minor": 0
    },
    "stakeAddressDeposit": 2000000,
    "stakePoolDeposit": 500000000,
    "stakePoolTargetNum": 500,
    "treasuryCut": 0.2,
    "txFeeFixed": 155381,
    "txFeePerByte": 44,
    "utxoCostPerByte": 4310,
    "utxoCostPerWord": null
}

lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli/testnet$ cardano-cli query tip --testnet-magic 2
{
    "block": 226775,
    "epoch": 56,
    "era": "Babbage",
    "hash": "725e48c2a3c82b0746d223c619e68f41d0e29e1b1d162fe6883ca8b9a7b3a5ac",
    "slot": 4913549,
    "syncProgress": "100.00"
}


Wallet Setup

[nix-shell:~/src/cardano-address/bin]$ ./cardano-address recovery-phrase generate --size 15 > phrase.prv

[nix-shell:~/src/cardano-address/bin]$ cat phrase.prv 
witness pipe egg awake hood false fury announce one wool diagram weird phone treat bacon

[nix-shell:~/src/cardano-address/bin]$ ./cardano-address key from-recovery-phrase Shelley < phrase.prv > root.xprv

[nix-shell:~/src/cardano-address/bin]$ ls
cardano-address  phrase.prv  root.xprv

[nix-shell:~/src/cardano-address/bin]$ cat root.xprv 
root_xsk1czlxuw4hd8gt5l3g72ym77cv9xuchsyh3398na87gvlwzlw60eya0et5fu8h335lsmd07g9mqhj2fzhwl5slgljkgvh0szkanrgwsdccwnvemq99yexehedth484zwzsgll77h0mk5tuvzmvdy3ldqp2egx73zks
[nix-shell:~/src/cardano-address/bin]$ ./cardano-address key child 1852H/1815H/0H/0/0 < root.xprv > key.xsk

[nix-shell:~/src/cardano-address/bin]$ ls
cardano-address  key.xsk  phrase.prv  root.xprv

[nix-shell:~/src/cardano-address/bin]$ cat key.xsk 
addr_xsk15q0ad36q4ydcerf5w4s3x5tz30ur6v79ylkhgn8ukruxrxk60eyl3p7ssuvp3er73a2jt7xsxf73h4eqeu3lfvxarzdwy35a2wwchw757yfwcduz5ej2pfy6kqvmvyalva6cpamgwkjwg6jel40tntxasvqsrj2w
[nix-shell:~/src/cardano-address/bin]$ cardano-cli --version
cardano-cli 1.35.3 - linux-x86_64 - ghc-8.10
git rev ea6d78c775d0f70dde979b52de022db749a2cc32

[nix-shell:~/src/cardano-address/bin]$ cardano-cli key convert-cardano-address-key --shelley-payment-key --signing-key-file key.xsk --out-file key.skey

[nix-shell:~/src/cardano-address/bin]$ ls
cardano-address  key.skey  key.xsk  phrase.prv  root.xprv

[nix-shell:~/src/cardano-address/bin]$ cat key.skey 
{
    "type": "PaymentExtendedSigningKeyShelley_ed25519_bip32",
    "description": "",
    "cborHex": "5880a01fd6c740a91b8c8d3475611351628bf83d33c527ed744cfcb0f8619ada7e49f887d0871818e47e8f5525f8d0327d1bd720cf23f4b0dd189ae2469d539d8bbb7afdf742e52fc46d9a6f2183204c3d5ca3533450b2674f61adff33172d6d9ad6d4f112ec3782a664a0a49ab019b613bf677580f76875a4e46a59fd5eb9acdd83"
}

[nix-shell:~/src/cardano-address/bin]$ cardano-cli key verification-key --signing-key-file key.skey --verification-key-file key.vkey

[nix-shell:~/src/cardano-address/bin]$ ls
cardano-address  key.skey  key.vkey  key.xsk  phrase.prv  root.xprv

[nix-shell:~/src/cardano-address/bin]$ cat key.vkey 
{
    "type": "PaymentExtendedVerificationKeyShelley_ed25519_bip32",
    "description": "",
    "cborHex": "58407afdf742e52fc46d9a6f2183204c3d5ca3533450b2674f61adff33172d6d9ad6d4f112ec3782a664a0a49ab019b613bf677580f76875a4e46a59fd5eb9acdd83"
}

[nix-shell:~/src/cardano-address/bin]$ cardano-cli address key-hash --payment-verification-key-file key.vkey > key.hash

[nix-shell:~/src/cardano-address/bin]$ ls -l
total 19116
-rwxr--r-- 1 lawrence lawrence 19548864 Aug 17 07:46 cardano-address
-rw-r--r-- 1 lawrence lawrence       57 Oct  4 20:11 key.hash
-rw------- 1 lawrence lawrence      367 Oct  4 20:10 key.skey
-rw------- 1 lawrence lawrence      244 Oct  4 20:11 key.vkey
-rw-r--r-- 1 lawrence lawrence      169 Oct  4 20:09 key.xsk
-rw-r--r-- 1 lawrence lawrence       89 Oct  4 20:07 phrase.prv
-rw-r--r-- 1 lawrence lawrence      169 Oct  4 20:08 root.xprv

[nix-shell:~/src/cardano-address/bin]$ cat key.hash 
b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682



lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ ./init-tx.sh testnet
+ '[' -z testnet ']'
+ ENV=testnet
+++ readlink -f ./init-tx.sh
++ dirname /home/lawrence/src/littercoin/scripts/cardano-cli/init-tx.sh
+ MY_DIR=/home/lawrence/src/littercoin/scripts/cardano-cli
+ source /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/global-export-variables.sh
++ set -e
++ set -o pipefail
++ export BASE=/home/lawrence/src/littercoin
++ BASE=/home/lawrence/src/littercoin
++ export WORK=/home/lawrence/src/littercoin/work
++ WORK=/home/lawrence/src/littercoin/work
++ export CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ export CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ export TESTNET_MAGIC=2
++ TESTNET_MAGIC=2
++ export ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ export ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ export ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ export MIN_ADA_OUTPUT_TX=2000000
++ MIN_ADA_OUTPUT_TX=2000000
++ export MIN_ADA_OUTPUT_TX_REF=20000000
++ MIN_ADA_OUTPUT_TX_REF=20000000
++ export COLLATERAL_ADA=11000000
++ COLLATERAL_ADA=11000000
++ export ADMIN_UTXO=49e480ebc9c39c0f2c9f2fba4050f38cad828e029bf7d4165f104b0b3e7b8db7#0
++ ADMIN_UTXO=49e480ebc9c39c0f2c9f2fba4050f38cad828e029bf7d4165f104b0b3e7b8db7#0
++ export ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ export ADMIN_CHANGE_ADDR=addr_test1qp8dsl0vlsr5x665znpvrtkc26cumqa3mrjcrswnvmavvah30vtlz5gcmmrwxnquzf6g3d8are4elxmfpwpv83fm5ntq2h4wh0
++ ADMIN_CHANGE_ADDR=addr_test1qp8dsl0vlsr5x665znpvrtkc26cumqa3mrjcrswnvmavvah30vtlz5gcmmrwxnquzf6g3d8are4elxmfpwpv83fm5ntq2h4wh0
++ export LC_VAL_REF_SCRIPT=d6a230368a711a6ed1837748e59e12b58a56d0976f77406bec5dd0fec1793687#2
++ LC_VAL_REF_SCRIPT=d6a230368a711a6ed1837748e59e12b58a56d0976f77406bec5dd0fec1793687#2
++ export LC_MINT_REF_SCRIPT=d6a230368a711a6ed1837748e59e12b58a56d0976f77406bec5dd0fec1793687#3
++ LC_MINT_REF_SCRIPT=d6a230368a711a6ed1837748e59e12b58a56d0976f77406bec5dd0fec1793687#3
++ export NFT_MINT_REF_SCRIPT=d6a230368a711a6ed1837748e59e12b58a56d0976f77406bec5dd0fec1793687#4
++ NFT_MINT_REF_SCRIPT=d6a230368a711a6ed1837748e59e12b58a56d0976f77406bec5dd0fec1793687#4
+ '[' testnet == mainnet ']'
+ network='--testnet-magic 2'
+ echo 'Socket path: /home/lawrence/src/littercoin/node.socket'
Socket path: /home/lawrence/src/littercoin/node.socket
+ ls -al /home/lawrence/src/littercoin/node.socket
srw------- 1 lawrence lawrence 0 Oct  4 16:49 /home/lawrence/src/littercoin/node.socket
+ mkdir -p /home/lawrence/src/littercoin/work
+ mkdir -p /home/lawrence/src/littercoin/work-backup
+ rm -f /home/lawrence/src/littercoin/work/pparms.json /home/lawrence/src/littercoin/work/tt-token-mint-tx-alonzo.body /home/lawrence/src/littercoin/work/tt-token-mint-tx-alonzo.tx
+ rm -f '/home/lawrence/src/littercoin/work-backup/*'
+ /home/lawrence/.local/bin/cardano-cli query protocol-parameters --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/pparms.json
+ thread_token_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.plutus
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.hash
++ jq -r .bytes
+ thread_token_mph=3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-name.json
++ jq -r .bytes
+ thread_token_name=caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3
+ lc_validator_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus --testnet-magic 2
+ lc_validator_script_addr=addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2
+ redeemer_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-thread-token-mint.json
+ lc_mint_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.plutus --testnet-magic 2
+ lc_mint_script_addr=addr_test1wp4y6ww4fkdy2fn642ghcutwcmphy4pkzy0nhumynecjm3qjr9eau
+ nft_mint_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-minting-policy.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-minting-policy.plutus --testnet-magic 2
+ nft_mint_script_addr=addr_test1wqcegze5xzcmpy3ttmg5dk3ypzgw9vqp99mxhqvaqvugawsv6qrzk
++ cat /home/lawrence/.local/keys/testnet/admin/key.hash
+ admin_pkh=b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682
+ echo 'starting littercoin thread token mint'
starting littercoin thread token mint
+ echo 'Script: /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.plutus'
Script: /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.plutus
+ '[' testnet == devnet ']'
+ admin_utxo_in=49e480ebc9c39c0f2c9f2fba4050f38cad828e029bf7d4165f104b0b3e7b8db7#0
+ admin_utxo_addr=addr_test1qp8dsl0vlsr5x665znpvrtkc26cumqa3mrjcrswnvmavvah30vtlz5gcmmrwxnquzf6g3d8are4elxmfpwpv83fm5ntq2h4wh0
+ /home/lawrence/.local/bin/cardano-cli transaction build --babbage-era --cardano-mode --testnet-magic 2 --change-address addr_test1qp8dsl0vlsr5x665znpvrtkc26cumqa3mrjcrswnvmavvah30vtlz5gcmmrwxnquzf6g3d8are4elxmfpwpv83fm5ntq2h4wh0 --tx-in-collateral 037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0 --tx-in 49e480ebc9c39c0f2c9f2fba4050f38cad828e029bf7d4165f104b0b3e7b8db7#0 --mint '1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3' --mint-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.plutus --mint-redeemer-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-thread-token-mint.json --tx-out 'addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2+2000000 + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3' --tx-out-inline-datum-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-datum-init.json --tx-out addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2+20000000 --tx-out-reference-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus --tx-out addr_test1wp4y6ww4fkdy2fn642ghcutwcmphy4pkzy0nhumynecjm3qjr9eau+20000000 --tx-out-reference-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.plutus --tx-out addr_test1wqcegze5xzcmpy3ttmg5dk3ypzgw9vqp99mxhqvaqvugawsv6qrzk+20000000 --tx-out-reference-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-minting-policy.plutus --protocol-params-file /home/lawrence/src/littercoin/work/pparms.json --out-file /home/lawrence/src/littercoin/work/tt-token-mint-tx-alonzo.body
Estimated transaction fee: Lovelace 842317
+ echo 'tx has been built'
tx has been built
+ /home/lawrence/.local/bin/cardano-cli transaction sign --tx-body-file /home/lawrence/src/littercoin/work/tt-token-mint-tx-alonzo.body --testnet-magic 2 --signing-key-file /home/lawrence/.local/keys/testnet/admin/key.skey --out-file /home/lawrence/src/littercoin/work/tt-token-mint-tx-alonzo.tx
+ echo 'tx has been signed'
tx has been signed
+ echo 'Submit the tx with plutus script and wait 5 seconds...'
Submit the tx with plutus script and wait 5 seconds...
+ /home/lawrence/.local/bin/cardano-cli transaction submit --tx-file /home/lawrence/src/littercoin/work/tt-token-mint-tx-alonzo.tx --testnet-magic 2
Transaction successfully submitted.

lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ cardano-cli query utxo --address addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2 --cardano-mode --testnet-magic 2
                           TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4     1        2000000 lovelace + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3 + TxOutDatumInline ReferenceTxInsScriptsInlineDatumsInBabbageEra (ScriptDataConstructor 0 [ScriptDataNumber 0,ScriptDataNumber 0])
20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4     2        20000000 lovelace + TxOutDatumNone
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ cardano-cli query utxo --address addr_test1wp4y6ww4fkdy2fn642ghcutwcmphy4pkzy0nhumynecjm3qjr9eau --cardano-mode --testnet-magic 2
                           TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4     3        20000000 lovelace + TxOutDatumNone
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ cardano-cli query utxo --address addr_test1wqcegze5xzcmpy3ttmg5dk3ypzgw9vqp99mxhqvaqvugawsv6qrzk --cardano-mode --testnet-magic 2
                           TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4     4        20000000 lovelace + TxOutDatumNone
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ 





lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ ./add-ada-tx.sh testnet
+ '[' -z testnet ']'
+ ENV=testnet
+++ readlink -f ./add-ada-tx.sh
++ dirname /home/lawrence/src/littercoin/scripts/cardano-cli/add-ada-tx.sh
+ MY_DIR=/home/lawrence/src/littercoin/scripts/cardano-cli
+ source /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/global-export-variables.sh
++ set -e
++ set -o pipefail
++ export BASE=/home/lawrence/src/littercoin
++ BASE=/home/lawrence/src/littercoin
++ export WORK=/home/lawrence/src/littercoin/work
++ WORK=/home/lawrence/src/littercoin/work
++ export CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ export CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ export TESTNET_MAGIC=2
++ TESTNET_MAGIC=2
++ export ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ export ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ export ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ export MIN_ADA_OUTPUT_TX=2000000
++ MIN_ADA_OUTPUT_TX=2000000
++ export MIN_ADA_OUTPUT_TX_REF=20000000
++ MIN_ADA_OUTPUT_TX_REF=20000000
++ export COLLATERAL_ADA=11000000
++ COLLATERAL_ADA=11000000
++ export ADMIN_UTXO=ba34e72e8fd5dbbe6638c7e0aed2932028a539177198879340a761ca2d3547ba#1
++ ADMIN_UTXO=ba34e72e8fd5dbbe6638c7e0aed2932028a539177198879340a761ca2d3547ba#1
++ export ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ export ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ export LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ export LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ export NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
++ NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
+ '[' testnet == mainnet ']'
+ network='--testnet-magic 2'
+ echo 'Socket path: /home/lawrence/src/littercoin/node.socket'
Socket path: /home/lawrence/src/littercoin/node.socket
+ ls -al /home/lawrence/src/littercoin/node.socket
srw------- 1 lawrence lawrence 0 Oct  4 16:49 /home/lawrence/src/littercoin/node.socket
+ mkdir -p /home/lawrence/src/littercoin/work
+ mkdir -p /home/lawrence/src/littercoin/work-backup
+ rm -f /home/lawrence/src/littercoin/work/add-ada-tx-alonzo.body /home/lawrence/src/littercoin/work/add-ada-tx-alonzo.tx /home/lawrence/src/littercoin/work/lc-datum-in.json /home/lawrence/src/littercoin/work/lc-datum-out.json /home/lawrence/src/littercoin/work/lc-validator-utxo.json /home/lawrence/src/littercoin/work/pparms.json /home/lawrence/src/littercoin/work/redeemer-add-ada.json
+ rm -f '/home/lawrence/src/littercoin/work-backup/*'
+ /home/lawrence/.local/bin/cardano-cli query protocol-parameters --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/pparms.json
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.hash
++ jq -r .bytes
+ thread_token_mph=3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-name.json
++ jq -r .bytes
+ thread_token_name=caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3
+ lc_validator_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus --testnet-magic 2
+ lc_validator_script_addr=addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2
+ redeemer_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-add-ada.json
+ ada_amount=10000000
+ '[' testnet == devnet ']'
+ admin_utxo_in=ba34e72e8fd5dbbe6638c7e0aed2932028a539177198879340a761ca2d3547ba#1
+ admin_utxo_addr=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
+ /home/lawrence/.local/bin/cardano-cli query utxo --address addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2 --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/lc-validator-utxo.json
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .key' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_utxo_tx_in=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#1
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .value.inlineDatum' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_datum_in='{
  "constructor": 0,
  "fields": [
    {
      "int": 0
    },
    {
      "int": 0
    }
  ]
}'
+ echo -n '{
  "constructor": 0,
  "fields": [
    {
      "int": 0
    },
    {
      "int": 0
    }
  ]
}'
++ jq -r '.fields[0].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_ada=0
+ new_total_ada=10000000
+ cat /home/lawrence/src/littercoin/work/lc-datum-in.json
+ jq -c '
  .fields[0].int   |= 10000000'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-add-ada.json
+ jq -c '
  .fields[0].int          |= 10000000'
+ /home/lawrence/.local/bin/cardano-cli transaction build --babbage-era --cardano-mode --testnet-magic 2 --change-address addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7 --tx-in-collateral 037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0 --tx-in ba34e72e8fd5dbbe6638c7e0aed2932028a539177198879340a761ca2d3547ba#1 --tx-in 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#1 --spending-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2 --spending-plutus-script-v2 --spending-reference-tx-in-inline-datum-present --spending-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-add-ada.json --tx-out 'addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2+10000000 + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3' --tx-out-inline-datum-file /home/lawrence/src/littercoin/work/lc-datum-out.json --protocol-params-file /home/lawrence/src/littercoin/work/pparms.json --out-file /home/lawrence/src/littercoin/work/add-ada-tx-alonzo.body
Estimated transaction fee: Lovelace 328262
+ echo 'tx has been built'
tx has been built
+ /home/lawrence/.local/bin/cardano-cli transaction sign --tx-body-file /home/lawrence/src/littercoin/work/add-ada-tx-alonzo.body --testnet-magic 2 --signing-key-file /home/lawrence/.local/keys/testnet/admin/key.skey --out-file /home/lawrence/src/littercoin/work/add-ada-tx-alonzo.tx
+ echo 'tx has been signed'
tx has been signed
+ echo 'Submit the tx with plutus script and wait 5 seconds...'
Submit the tx with plutus script and wait 5 seconds...
+ /home/lawrence/.local/bin/cardano-cli transaction submit --tx-file /home/lawrence/src/littercoin/work/add-ada-tx-alonzo.tx --testnet-magic 2
Transaction successfully submitted.
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ cardano-cli query utxo --address addr_test1vp8dsl0vlsr5x665znpvrtkc26cumqa3mrjcrswnvmavvas6ps42w --cardano-mode --testnet-magic 2
                           TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ cardano-cli query utxo --address addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7 --cardano-mode --testnet-magic 2
                           TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63     0        8918661192 lovelace + TxOutDatumNone
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ cardano-cli query utxo --address addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2 --cardano-mode --testnet-magic 2
                           TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4     2        20000000 lovelace + TxOutDatumNone
60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63     1        10000000 lovelace + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3 + TxOutDatumInline ReferenceTxInsScriptsInlineDatumsInBabbageEra (ScriptDataConstructor 0 [ScriptDataNumber 10000000,ScriptDataNumber 0])




lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ ./mint-nft.sh testnet
+ '[' -z testnet ']'
+ ENV=testnet
+++ readlink -f ./mint-nft.sh
++ dirname /home/lawrence/src/littercoin/scripts/cardano-cli/mint-nft.sh
+ MY_DIR=/home/lawrence/src/littercoin/scripts/cardano-cli
+ source /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/global-export-variables.sh
++ set -e
++ set -o pipefail
++ export BASE=/home/lawrence/src/littercoin
++ BASE=/home/lawrence/src/littercoin
++ export WORK=/home/lawrence/src/littercoin/work
++ WORK=/home/lawrence/src/littercoin/work
++ export CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ export CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ export TESTNET_MAGIC=2
++ TESTNET_MAGIC=2
++ export ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ export ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ export ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ export MIN_ADA_OUTPUT_TX=2000000
++ MIN_ADA_OUTPUT_TX=2000000
++ export MIN_ADA_OUTPUT_TX_REF=20000000
++ MIN_ADA_OUTPUT_TX_REF=20000000
++ export COLLATERAL_ADA=11000000
++ COLLATERAL_ADA=11000000
++ export ADMIN_UTXO=60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63#0
++ ADMIN_UTXO=60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63#0
++ export ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ export ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ export MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ export LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ export LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ export NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
++ NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
+ '[' testnet == mainnet ']'
+ network='--testnet-magic 2'
+ echo 'Socket path: /home/lawrence/src/littercoin/node.socket'
Socket path: /home/lawrence/src/littercoin/node.socket
+ ls -al /home/lawrence/src/littercoin/node.socket
srw------- 1 lawrence lawrence 0 Oct  4 16:49 /home/lawrence/src/littercoin/node.socket
+ mkdir -p /home/lawrence/src/littercoin/work
+ mkdir -p /home/lawrence/src/littercoin/work-backup
+ rm -f /home/lawrence/src/littercoin/work/mint-nft-tx-alonzo.body /home/lawrence/src/littercoin/work/mint-nft-tx-alonzo.tx /home/lawrence/src/littercoin/work/pparms.json
+ rm -f '/home/lawrence/src/littercoin/work-backup/*'
+ /home/lawrence/.local/bin/cardano-cli query protocol-parameters --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/pparms.json
+ nft_mint_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-minting-policy.plutus
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-minting-policy.hash
++ jq -r .bytes
+ nft_mint_mph=31940b3430b1b0922b5ed146da240890e2b00129766b819d03388eba
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-token-name.json
++ jq -r .bytes
+ nft_token_name=4c6974746572636f696e20417070726f766564204d65726368616e74
+ redeemer_nft_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint-nft.json
++ cat /home/lawrence/.local/keys/testnet/admin/key.hash
+ admin_pkh=b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682
+ '[' testnet == devnet ']'
+ admin_utxo_in=60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63#0
+ admin_utxo_addr=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
+ /home/lawrence/.local/bin/cardano-cli transaction build --babbage-era --cardano-mode --testnet-magic 2 --change-address addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7 --tx-in-collateral 037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0 --tx-in 60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63#0 --mint '1 31940b3430b1b0922b5ed146da240890e2b00129766b819d03388eba.4c6974746572636f696e20417070726f766564204d65726368616e74' --mint-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4 --mint-plutus-script-v2 --mint-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint-nft.json --policy-id 31940b3430b1b0922b5ed146da240890e2b00129766b819d03388eba --tx-out 'addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds+2000000 + 1 31940b3430b1b0922b5ed146da240890e2b00129766b819d03388eba.4c6974746572636f696e20417070726f766564204d65726368616e74' --required-signer-hash b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682 --protocol-params-file /home/lawrence/src/littercoin/work/pparms.json --out-file /home/lawrence/src/littercoin/work/mint-nft-tx-alonzo.body
Estimated transaction fee: Lovelace 246759
+ echo 'tx has been built'
tx has been built
+ /home/lawrence/.local/bin/cardano-cli transaction sign --tx-body-file /home/lawrence/src/littercoin/work/mint-nft-tx-alonzo.body --testnet-magic 2 --signing-key-file /home/lawrence/.local/keys/testnet/admin/key.skey --out-file /home/lawrence/src/littercoin/work/mint-nft-tx-alonzo.tx
+ echo 'tx has been signed'
tx has been signed
+ echo 'Submit the tx with plutus script and wait 5 seconds...'
Submit the tx with plutus script and wait 5 seconds...
+ /home/lawrence/.local/bin/cardano-cli transaction submit --tx-file /home/lawrence/src/littercoin/work/mint-nft-tx-alonzo.tx --testnet-magic 2
Transaction successfully submitted.



lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ ./mint-littercoin.sh testnet
+ '[' -z testnet ']'
+ ENV=testnet
+++ readlink -f ./mint-littercoin.sh
++ dirname /home/lawrence/src/littercoin/scripts/cardano-cli/mint-littercoin.sh
+ MY_DIR=/home/lawrence/src/littercoin/scripts/cardano-cli
+ source /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/global-export-variables.sh
++ set -e
++ set -o pipefail
++ export BASE=/home/lawrence/src/littercoin
++ BASE=/home/lawrence/src/littercoin
++ export WORK=/home/lawrence/src/littercoin/work
++ WORK=/home/lawrence/src/littercoin/work
++ export CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ export CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ export TESTNET_MAGIC=2
++ TESTNET_MAGIC=2
++ export ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ export ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ export ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ export MIN_ADA_OUTPUT_TX=2000000
++ MIN_ADA_OUTPUT_TX=2000000
++ export MIN_ADA_OUTPUT_TX_REF=20000000
++ MIN_ADA_OUTPUT_TX_REF=20000000
++ export COLLATERAL_ADA=11000000
++ COLLATERAL_ADA=11000000
++ export ADMIN_UTXO=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#0
++ ADMIN_UTXO=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#0
++ export ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ export ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ export MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ export USER_ADDR=addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg
++ USER_ADDR=addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg
++ export LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ export LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ export NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
++ NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
+ '[' testnet == mainnet ']'
+ network='--testnet-magic 2'
+ echo 'Socket path: /home/lawrence/src/littercoin/node.socket'
Socket path: /home/lawrence/src/littercoin/node.socket
+ ls -al /home/lawrence/src/littercoin/node.socket
srw------- 1 lawrence lawrence 0 Oct  4 16:49 /home/lawrence/src/littercoin/node.socket
+ mkdir -p /home/lawrence/src/littercoin/work
+ mkdir -p /home/lawrence/src/littercoin/work-backup
+ rm -f /home/lawrence/src/littercoin/work/lc-datum-in.json /home/lawrence/src/littercoin/work/lc-datum-out.json /home/lawrence/src/littercoin/work/lc-validator-utxo.json /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.body /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.tx /home/lawrence/src/littercoin/work/pparms.json /home/lawrence/src/littercoin/work/redeemer-mint-lc.json /home/lawrence/src/littercoin/work/redeemer-mint.json
+ rm -f '/home/lawrence/src/littercoin/work-backup/*'
+ /home/lawrence/.local/bin/cardano-cli query protocol-parameters --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/pparms.json
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.hash
++ jq -r .bytes
+ thread_token_mph=3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-name.json
++ jq -r .bytes
+ thread_token_name=caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3
+ lc_mint_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.plutus
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.hash
++ jq -r .bytes
+ lc_mint_mph=6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-name.json
++ jq -r .bytes
+ lc_token_name=4c6974746572636f696e
+ lc_validator_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus --testnet-magic 2
+ lc_validator_script_addr=addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2
+ redeemer_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint.json
+ redeemer_lc_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint-lc.json
+ token_metadata_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-metadata.json
++ cat /home/lawrence/.local/keys/testnet/admin/key.hash
+ admin_pkh=b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682
+ lc_amount=100
+ '[' testnet == devnet ']'
+ admin_utxo_in=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#0
+ admin_utxo_addr=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
+ /home/lawrence/.local/bin/cardano-cli query utxo --address addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2 --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/lc-validator-utxo.json
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .key' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_utxo_tx_in=60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63#1
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .value.inlineDatum' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_datum_in='{
  "constructor": 0,
  "fields": [
    {
      "int": 10000000
    },
    {
      "int": 0
    }
  ]
}'
+ echo -n '{
  "constructor": 0,
  "fields": [
    {
      "int": 10000000
    },
    {
      "int": 0
    }
  ]
}'
++ jq -r '.fields[0].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_ada=10000000
++ jq -r '.fields[1].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_lc=0
+ new_total_lc=100
+ cat /home/lawrence/src/littercoin/work/lc-datum-in.json
+ jq -c '
  .fields[1].int   |= 100'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint.json
+ jq -c '
  .fields[0].int          |= 100'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint-lc.json
+ jq -c '
  .fields[1].int          |= 10000000'
+ /home/lawrence/.local/bin/cardano-cli transaction build --babbage-era --cardano-mode --testnet-magic 2 --change-address addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7 --tx-in-collateral 037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0 --tx-in 5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#0 --tx-in 60b83a1a24075c812d46b508fc8733d4e489dee66a66f977268115714e912a63#1 --spending-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2 --spending-plutus-script-v2 --spending-reference-tx-in-inline-datum-present --spending-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-mint.json --mint '100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e' --mint-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3 --mint-plutus-script-v2 --mint-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-mint-lc.json --policy-id 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4 --tx-out 'addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2+10000000 + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3' --tx-out-inline-datum-file /home/lawrence/src/littercoin/work/lc-datum-out.json --tx-out 'addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e' --required-signer-hash b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682 --protocol-params-file /home/lawrence/src/littercoin/work/pparms.json --metadata-json-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-metadata.json --out-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.body
Estimated transaction fee: Lovelace 464390
+ echo 'tx has been built'
tx has been built
+ /home/lawrence/.local/bin/cardano-cli transaction sign --tx-body-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.body --testnet-magic 2 --signing-key-file /home/lawrence/.local/keys/testnet/admin/key.skey --out-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.tx
+ echo 'tx has been signed'
tx has been signed
+ echo 'Submit the tx with plutus script and wait 5 seconds...'
Submit the tx with plutus script and wait 5 seconds...
+ /home/lawrence/.local/bin/cardano-cli transaction submit --tx-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.tx --testnet-magic 2
Transaction successfully submitted.




lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ ./burn-littercoin.sh testnet
+ '[' -z testnet ']'
+ ENV=testnet
+++ readlink -f ./burn-littercoin.sh
++ dirname /home/lawrence/src/littercoin/scripts/cardano-cli/burn-littercoin.sh
+ MY_DIR=/home/lawrence/src/littercoin/scripts/cardano-cli
+ source /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/global-export-variables.sh
++ set -e
++ set -o pipefail
++ export BASE=/home/lawrence/src/littercoin
++ BASE=/home/lawrence/src/littercoin
++ export WORK=/home/lawrence/src/littercoin/work
++ WORK=/home/lawrence/src/littercoin/work
++ export CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ export CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ export TESTNET_MAGIC=2
++ TESTNET_MAGIC=2
++ export ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ export ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ export ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ export MERCHANT_SKEY=/home/lawrence/.local/keys/testnet/merchant/key.skey
++ MERCHANT_SKEY=/home/lawrence/.local/keys/testnet/merchant/key.skey
++ export MIN_ADA_OUTPUT_TX=2000000
++ MIN_ADA_OUTPUT_TX=2000000
++ export MIN_ADA_OUTPUT_TX_REF=20000000
++ MIN_ADA_OUTPUT_TX_REF=20000000
++ export COLLATERAL_ADA=11000000
++ COLLATERAL_ADA=11000000
++ export ADMIN_UTXO=cb1a293c1203b87eb7ab65fdbcb722b6c7cdb3abb4544b949ab47cc9fb47383a#0
++ ADMIN_UTXO=cb1a293c1203b87eb7ab65fdbcb722b6c7cdb3abb4544b949ab47cc9fb47383a#0
++ export ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ ADMIN_COLLATERAL=037d222048842877d575b3f93b0ba20b64b20c5398ace6b3bfb343ad9be749fb#0
++ export ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ export MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ export MERCHANT_UTXO_NFT_TOKEN=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#1
++ MERCHANT_UTXO_NFT_TOKEN=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#1
++ export MERCHANT_UTXO_LC_TOKEN=ee864c7522201d1b86c711c985acd7d5f19fdb9509aa63a4db0a98484584d213#1
++ MERCHANT_UTXO_LC_TOKEN=ee864c7522201d1b86c711c985acd7d5f19fdb9509aa63a4db0a98484584d213#1
++ export MERCHANT_UTXO=e70f8a3d2195d22d474bcc0775ac2d7f239cedebf708789ab266bc581c6eccd7#0
++ MERCHANT_UTXO=e70f8a3d2195d22d474bcc0775ac2d7f239cedebf708789ab266bc581c6eccd7#0
++ export MERCHANT_COLLATERAL=dbc3d08f752d876281c1c02c6813316f4bb39e15e3e4fd644799822b327686cb#1
++ MERCHANT_COLLATERAL=dbc3d08f752d876281c1c02c6813316f4bb39e15e3e4fd644799822b327686cb#1
++ export USER_ADDR=addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg
++ USER_ADDR=addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg
++ export LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ export LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ export NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
++ NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
+ '[' testnet == mainnet ']'
+ network='--testnet-magic 2'
+ echo 'Socket path: /home/lawrence/src/littercoin/node.socket'
Socket path: /home/lawrence/src/littercoin/node.socket
+ ls -al /home/lawrence/src/littercoin/node.socket
srw------- 1 lawrence lawrence 0 Oct  4 16:49 /home/lawrence/src/littercoin/node.socket
+ mkdir -p /home/lawrence/src/littercoin/work
+ mkdir -p /home/lawrence/src/littercoin/work-backup
+ rm -f /home/lawrence/src/littercoin/work/burn-lc-tx-alonzo.body /home/lawrence/src/littercoin/work/burn-lc-tx-alonzo.tx /home/lawrence/src/littercoin/work/lc-datum-in.json /home/lawrence/src/littercoin/work/lc-datum-out.json /home/lawrence/src/littercoin/work/lc-validator-utxo.json /home/lawrence/src/littercoin/work/pparms.json /home/lawrence/src/littercoin/work/redeemer-burn-lc.json /home/lawrence/src/littercoin/work/redeemer-burn.json
+ rm -f '/home/lawrence/src/littercoin/work-backup/*'
+ /home/lawrence/.local/bin/cardano-cli query protocol-parameters --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/pparms.json
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.hash
++ jq -r .bytes
+ thread_token_mph=3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-name.json
++ jq -r .bytes
+ thread_token_name=caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-minting-policy.hash
++ jq -r .bytes
+ nft_mint_mph=31940b3430b1b0922b5ed146da240890e2b00129766b819d03388eba
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/nft-token-name.json
++ jq -r .bytes
+ nft_token_name=4c6974746572636f696e20417070726f766564204d65726368616e74
+ lc_mint_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.plutus
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.hash
++ jq -r .bytes
+ lc_mint_mph=6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-name.json
++ jq -r .bytes
+ lc_token_name=4c6974746572636f696e
+ lc_validator_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus --testnet-magic 2
+ lc_validator_script_addr=addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2
+ redeemer_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-burn.json
+ redeemer_lc_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-burn-lc.json
+ lc_amount=25
+ lc_remaining=75
+ '[' testnet == devnet ']'
+ merchant_utxo_addr=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
+ merchant_nft_utxo_tx_in=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#1
+ merchant_lc_utxo_tx_in=ee864c7522201d1b86c711c985acd7d5f19fdb9509aa63a4db0a98484584d213#1
+ merchant_utxo_in=e70f8a3d2195d22d474bcc0775ac2d7f239cedebf708789ab266bc581c6eccd7#0
+ /home/lawrence/.local/bin/cardano-cli query utxo --address addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2 --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/lc-validator-utxo.json
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .key' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_utxo_tx_in=cb1a293c1203b87eb7ab65fdbcb722b6c7cdb3abb4544b949ab47cc9fb47383a#1
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .value.inlineDatum' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_datum_in='{
  "constructor": 0,
  "fields": [
    {
      "int": 10000000
    },
    {
      "int": 100
    }
  ]
}'
+ echo -n '{
  "constructor": 0,
  "fields": [
    {
      "int": 10000000
    },
    {
      "int": 100
    }
  ]
}'
++ jq -r '.fields[0].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_ada=10000000
++ jq -r '.fields[1].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_lc=100
+ withdraw_ada=2500000
+ new_total_ada=7500000
+ new_total_lc=75
+ cat /home/lawrence/src/littercoin/work/lc-datum-in.json
+ jq -c '
  .fields[0].int   |= 7500000
| .fields[1].int   |= 75'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-burn.json
+ jq -c '
  .fields[0].int          |= 25'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-burn-lc.json
+ jq -c '
  .fields[1].int          |= 7500000
| .fields[2].int          |= 2500000'
+ /home/lawrence/.local/bin/cardano-cli transaction build --babbage-era --cardano-mode --testnet-magic 2 --change-address addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds --tx-in-collateral dbc3d08f752d876281c1c02c6813316f4bb39e15e3e4fd644799822b327686cb#1 --tx-in e70f8a3d2195d22d474bcc0775ac2d7f239cedebf708789ab266bc581c6eccd7#0 --tx-in 5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#1 --tx-in ee864c7522201d1b86c711c985acd7d5f19fdb9509aa63a4db0a98484584d213#1 --tx-in cb1a293c1203b87eb7ab65fdbcb722b6c7cdb3abb4544b949ab47cc9fb47383a#1 --spending-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2 --spending-plutus-script-v2 --spending-reference-tx-in-inline-datum-present --spending-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-burn.json --mint '-25 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e' --mint-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3 --mint-plutus-script-v2 --mint-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-burn-lc.json --policy-id 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4 --tx-out 'addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2+7500000 + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3' --tx-out-inline-datum-file /home/lawrence/src/littercoin/work/lc-datum-out.json --tx-out 'addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds+2500000 + 1 31940b3430b1b0922b5ed146da240890e2b00129766b819d03388eba.4c6974746572636f696e20417070726f766564204d65726368616e74' --tx-out 'addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds+2000000 + 75 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e' --protocol-params-file /home/lawrence/src/littercoin/work/pparms.json --out-file /home/lawrence/src/littercoin/work/burn-lc-tx-alonzo.body
Estimated transaction fee: Lovelace 679952
+ echo 'tx has been built'
tx has been built
+ /home/lawrence/.local/bin/cardano-cli transaction sign --tx-body-file /home/lawrence/src/littercoin/work/burn-lc-tx-alonzo.body --testnet-magic 2 --signing-key-file /home/lawrence/.local/keys/testnet/merchant/key.skey --out-file /home/lawrence/src/littercoin/work/burn-lc-tx-alonzo.tx
+ echo 'tx has been signed'
tx has been signed
+ echo 'Submit the tx with plutus script and wait 5 seconds...'
Submit the tx with plutus script and wait 5 seconds...
+ /home/lawrence/.local/bin/cardano-cli transaction submit --tx-file /home/lawrence/src/littercoin/work/burn-lc-tx-alonzo.tx --testnet-magic 2
Transaction successfully submitted.



Batch Minting Test on testnet - 2022-10-17

lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli/testnet/data$ cat lc-minting-batch-file.txt 
addr_test1qze9w9uvm0524psnam4hyrjscr9dznujt0p65p0mz7md94q76nzq682nke2r2znd4sw6xrxzs8qhdg5fwzs3tzm9c4vqawm0zl+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
addr_test1qze9w9uvm0524psnam4hyrjscr9dznujt0p65p0mz7md94q76nzq682nke2r2znd4sw6xrxzs8qhdg5fwzs3tzm9c4vqawm0zl+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e


lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ ./mint-littercoin.sh testnet
+ '[' -z testnet ']'
+ ENV=testnet
+++ readlink -f ./mint-littercoin.sh
++ dirname /home/lawrence/src/littercoin/scripts/cardano-cli/mint-littercoin.sh
+ MY_DIR=/home/lawrence/src/littercoin/scripts/cardano-cli
+ source /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/global-export-variables.sh
++ set -e
++ set -o pipefail
++ export BASE=/home/lawrence/src/littercoin
++ BASE=/home/lawrence/src/littercoin
++ export WORK=/home/lawrence/src/littercoin/work
++ WORK=/home/lawrence/src/littercoin/work
++ export CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ CARDANO_CLI=/home/lawrence/.local/bin/cardano-cli
++ export CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ CARDANO_NODE_SOCKET_PATH=/home/lawrence/src/littercoin/node.socket
++ export TESTNET_MAGIC=2
++ TESTNET_MAGIC=2
++ export ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ ADMIN_VKEY=/home/lawrence/.local/keys/testnet/admin/key.vkey
++ export ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ ADMIN_SKEY=/home/lawrence/.local/keys/testnet/admin/key.skey
++ export ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ ADMIN_PKH=/home/lawrence/.local/keys/testnet/admin/key.hash
++ export MERCHANT_SKEY=/home/lawrence/.local/keys/testnet/merchant/key.skey
++ MERCHANT_SKEY=/home/lawrence/.local/keys/testnet/merchant/key.skey
++ export MIN_ADA_OUTPUT_TX=2000000
++ MIN_ADA_OUTPUT_TX=2000000
++ export MIN_ADA_OUTPUT_TX_REF=20000000
++ MIN_ADA_OUTPUT_TX_REF=20000000
++ export COLLATERAL_ADA=11000000
++ COLLATERAL_ADA=11000000
++ export ADMIN_UTXO=817a13fcb42769be322c9f1063cb9783aaacdb31f4e295d5bb97ff17e250d7c7#0
++ ADMIN_UTXO=817a13fcb42769be322c9f1063cb9783aaacdb31f4e295d5bb97ff17e250d7c7#0
++ export ADMIN_COLLATERAL=e722b61f665a486baf81335774ca1f213bbb68b8905e7441417d5610e4a24a9a#0
++ ADMIN_COLLATERAL=e722b61f665a486baf81335774ca1f213bbb68b8905e7441417d5610e4a24a9a#0
++ export ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ ADMIN_CHANGE_ADDR=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
++ export MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ MERCHANT_ADDR=addr_test1vq7k907l7e59t52skm8e0ezsnmmc7h4xy30kg2klwc5n8rqug2pds
++ export MERCHANT_UTXO_NFT_TOKEN=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#1
++ MERCHANT_UTXO_NFT_TOKEN=5b2fd4c1c21d00500f4b299c9d1eeeef7a8e0e22ea3f88b9e2128ca225d9d909#1
++ export MERCHANT_UTXO_LC_TOKEN=ee864c7522201d1b86c711c985acd7d5f19fdb9509aa63a4db0a98484584d213#1
++ MERCHANT_UTXO_LC_TOKEN=ee864c7522201d1b86c711c985acd7d5f19fdb9509aa63a4db0a98484584d213#1
++ export MERCHANT_UTXO=e70f8a3d2195d22d474bcc0775ac2d7f239cedebf708789ab266bc581c6eccd7#0
++ MERCHANT_UTXO=e70f8a3d2195d22d474bcc0775ac2d7f239cedebf708789ab266bc581c6eccd7#0
++ export MERCHANT_COLLATERAL=dbc3d08f752d876281c1c02c6813316f4bb39e15e3e4fd644799822b327686cb#1
++ MERCHANT_COLLATERAL=dbc3d08f752d876281c1c02c6813316f4bb39e15e3e4fd644799822b327686cb#1
++ export USER_ADDR=addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg
++ USER_ADDR=addr_test1vq5s7k4kwqz4rrfe8mm9jz9tpm7c5u93yfwwsaw708yxs5sm70qjg
++ export LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ LC_VAL_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2
++ export LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ LC_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3
++ export NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
++ NFT_MINT_REF_SCRIPT=20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#4
+ '[' testnet == mainnet ']'
+ network='--testnet-magic 2'
+ echo 'Socket path: /home/lawrence/src/littercoin/node.socket'
Socket path: /home/lawrence/src/littercoin/node.socket
+ ls -al /home/lawrence/src/littercoin/node.socket
srw------- 1 lawrence lawrence 0 Oct 16 19:55 /home/lawrence/src/littercoin/node.socket
+ mkdir -p /home/lawrence/src/littercoin/work
+ mkdir -p /home/lawrence/src/littercoin/work-backup
+ rm -f /home/lawrence/src/littercoin/work/cli-build.out /home/lawrence/src/littercoin/work/lc-datum-in.json /home/lawrence/src/littercoin/work/lc-datum-out.json /home/lawrence/src/littercoin/work/lc-validator-utxo.json /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.body /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.tx /home/lawrence/src/littercoin/work/pparms.json /home/lawrence/src/littercoin/work/redeemer-mint-lc.json /home/lawrence/src/littercoin/work/redeemer-mint.json
+ rm -f '/home/lawrence/src/littercoin/work-backup/*'
+ /home/lawrence/.local/bin/cardano-cli query protocol-parameters --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/pparms.json
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-minting-policy.hash
++ jq -r .bytes
+ thread_token_mph=3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/thread-token-name.json
++ jq -r .bytes
+ thread_token_name=caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3
+ lc_mint_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.plutus
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-minting-policy.hash
++ jq -r .bytes
+ lc_mint_mph=6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4
++ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-name.json
++ jq -r .bytes
+ lc_token_name=4c6974746572636f696e
+ lc_validator_script=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus
++ /home/lawrence/.local/bin/cardano-cli address build --payment-script-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-validator.plutus --testnet-magic 2
+ lc_validator_script_addr=addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2
+ redeemer_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint.json
+ redeemer_lc_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint-lc.json
+ token_metadata_file_path=/home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-metadata.json
++ cat /home/lawrence/.local/keys/testnet/admin/key.hash
+ admin_pkh=b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682
+ readarray rows
+ lc_amount=0
+ for row in "${rows[@]}"
+ row_array=(${row})
+ qty=100
+ lc_amount=100
+ for row in "${rows[@]}"
+ row_array=(${row})
+ qty=100
+ lc_amount=200
+ for row in "${rows[@]}"
+ row_array=(${row})
+ qty=100
+ lc_amount=300
+ for row in "${rows[@]}"
+ row_array=(${row})
+ qty=100
+ lc_amount=400
+ for row in "${rows[@]}"
+ row_array=(${row})
+ qty=100
+ lc_amount=500
+ '[' testnet == devnet ']'
+ admin_utxo_in=817a13fcb42769be322c9f1063cb9783aaacdb31f4e295d5bb97ff17e250d7c7#0
+ admin_utxo_addr=addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
+ /home/lawrence/.local/bin/cardano-cli query utxo --address addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2 --testnet-magic 2 --out-file /home/lawrence/src/littercoin/work/lc-validator-utxo.json
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .key' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_utxo_tx_in=07c8e78a0daa59ef4e1805be01a5ffdfe88f359ef0ede8fc0759567ba43f31e8#0
++ jq -r 'to_entries[] 
| select(.value.value."3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385"."caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3") 
| .value.inlineDatum' /home/lawrence/src/littercoin/work/lc-validator-utxo.json
+ lc_validator_datum_in='{
  "constructor": 0,
  "fields": [
    {
      "int": 766122455
    },
    {
      "int": 185
    }
  ]
}'
+ echo -n '{
  "constructor": 0,
  "fields": [
    {
      "int": 766122455
    },
    {
      "int": 185
    }
  ]
}'
++ jq -r '.fields[0].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_ada=766122455
++ jq -r '.fields[1].int' /home/lawrence/src/littercoin/work/lc-datum-in.json
+ total_lc=185
+ new_total_lc=685
+ cat /home/lawrence/src/littercoin/work/lc-datum-in.json
+ jq -c '
  .fields[1].int   |= 685'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint.json
+ jq -c '
  .fields[0].int          |= 500'
+ cat /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/redeemer-mint-lc.json
+ jq -c '
  .fields[1].int          |= 766122455'
+ printf %s '/home/lawrence/.local/bin/cardano-cli transaction build '
+ printf %s '--babbage-era '
+ printf %s '--cardano-mode '
+ printf %s '--testnet-magic 2 '
+ printf %s '--change-address addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7 '
+ printf %s '--tx-in-collateral e722b61f665a486baf81335774ca1f213bbb68b8905e7441417d5610e4a24a9a#0 '
+ printf %s '--tx-in 817a13fcb42769be322c9f1063cb9783aaacdb31f4e295d5bb97ff17e250d7c7#0 '
+ printf %s '--tx-in 07c8e78a0daa59ef4e1805be01a5ffdfe88f359ef0ede8fc0759567ba43f31e8#0 '
+ printf %s '--spending-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#2 '
+ printf %s '--spending-plutus-script-v2 '
+ printf %s '--spending-reference-tx-in-inline-datum-present '
+ printf %s '--spending-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-mint.json '
+ printf %s '--mint '\''500 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e'\'' '
+ printf %s '--mint-tx-in-reference 20a6c33162e21420d671f64a983023855fe2444cb0e8bb988718eb2d9d833aa4#3 '
+ printf %s '--mint-plutus-script-v2 '
+ printf %s '--mint-reference-tx-in-redeemer-file /home/lawrence/src/littercoin/work/redeemer-mint-lc.json '
+ printf %s '--policy-id 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4 '
+ printf %s '--tx-out '\''addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2+766122455 + 1 3c71662cfdfeebbaa8363c63d94ddf336c557c6776b789b05c23c385.caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3'\'' '
+ printf %s '--tx-out-inline-datum-file /home/lawrence/src/littercoin/work/lc-datum-out.json '
+ for row in "${rows[@]}"
+ printf %s '--tx-out '\''addr_test1qze9w9uvm0524psnam4hyrjscr9dznujt0p65p0mz7md94q76nzq682nke2r2znd4sw6xrxzs8qhdg5fwzs3tzm9c4vqawm0zl+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
'\'' '
+ tr -d '\n'
+ for row in "${rows[@]}"
+ printf %s '--tx-out '\''addr_test1qze9w9uvm0524psnam4hyrjscr9dznujt0p65p0mz7md94q76nzq682nke2r2znd4sw6xrxzs8qhdg5fwzs3tzm9c4vqawm0zl+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
'\'' '
+ tr -d '\n'
+ for row in "${rows[@]}"
+ printf %s '--tx-out '\''addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
'\'' '
+ tr -d '\n'
+ for row in "${rows[@]}"
+ printf %s '--tx-out '\''addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e
'\'' '
+ tr -d '\n'
+ for row in "${rows[@]}"
+ printf %s '--tx-out '\''addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5+2000000 + 100 6a4d39d54d9a45267aaa917c716ec6c3725436111f3bf3649e712dc4.4c6974746572636f696e'\'' '
+ tr -d '\n'
+ printf %s '--required-signer-hash b9abcf6867519e28042048aa11207214a52e6d5d3288b752d1c27682 '
+ printf %s '--protocol-params-file /home/lawrence/src/littercoin/work/pparms.json '
+ printf %s '--metadata-json-file /home/lawrence/src/littercoin/scripts/cardano-cli/testnet/data/lc-token-metadata.json '
+ printf %s '--out-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.body '
+ bash /home/lawrence/src/littercoin/work/cli-build.out
Estimated transaction fee: Lovelace 563794
+ echo 'tx has been built'
tx has been built
+ /home/lawrence/.local/bin/cardano-cli transaction sign --tx-body-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.body --testnet-magic 2 --signing-key-file /home/lawrence/.local/keys/testnet/admin/key.skey --out-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.tx
+ echo 'tx has been signed'
tx has been signed
+ echo 'Submit the tx with plutus script and wait 5 seconds...'
Submit the tx with plutus script and wait 5 seconds...
+ /home/lawrence/.local/bin/cardano-cli transaction submit --tx-file /home/lawrence/src/littercoin/work/mint-lc-tx-alonzo.tx --testnet-magic 2
Transaction successfully submitted.
lawrence@lawrence-iMac:~/src/littercoin/scripts/cardano-cli$ 


7 UTxO Output(s)
addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5
ext
t
 
2.000000
100
Littercoin
addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5
ext
t
 
2.000000
100
Littercoin
addr_test1qqqppuhrmgey82w7865asturshetzlhjqhycezytzf68wnwzxs6rl662f4u067gkj92tcdchflcc0z78mfz9d9scjcusv6d0x5
ext
t
 
2.000000
100
Littercoin
addr_test1qze9w9uvm0524psnam4hyrjscr9dznujt0p65p0mz7md94q76nzq682nke2r2znd4sw6xrxzs8qhdg5fwzs3tzm9c4vqawm0zl
ext
t
 
2.000000
100
Littercoin
addr_test1qze9w9uvm0524psnam4hyrjscr9dznujt0p65p0mz7md94q76nzq682nke2r2znd4sw6xrxzs8qhdg5fwzs3tzm9c4vqawm0zl
ext
t
 
2.000000
100
Littercoin
addr_test1vzu6hnmgvageu2qyypy25yfqwg222tndt5eg3d6j68p8dqspgdxn7
Account #0
t
 
4.436206
addr_test1wzuz36yejxwh69u62k096ylgnswaaqjfqpcm5j2j39zp3lgwvxgu2
script
t
 
766.122455
1
caf74d41a0b16a6d2bf601796c2b73912538cd2faaccae1d9c6da7d405873fd3
Inline Datum
Hash	
"a043cfcceeac86e9889f7090dc6291b18f97726d678f9a00445aaf2898bfc067"
Bytecode	
"d8799f1a2daa19d71902adff"
JSON Script	
{...} // 2 items

